#!/bin/sh

set -e

# Standard live-build configuration
lb config noauto \
--architectures amd64 \
--binary-images iso-hybrid \
--distribution parrot \
--debian-installer none \
--archive-areas "main contrib non-free" \
--debootstrap-options "--variant=minbase" \
--iso-publisher "Custom ParrotOS Build" \
--iso-volume "ParrotOS-Custom" \
--linux-packages "linux-image" \
--memtest none \
--parent-mirror-bootstrap "https://deb.parrot.sh/parrot" \
--parent-mirror-binary "https://deb.parrot.sh/parrot" \
--apt-indices false \
--apt-recommends false \
--bootappend-live "boot=live noautomount components quiet splash" \
--init-ramfs live-boot
"${@}"

# Add package lists for minimal XFCE desktop
echo "xfce4
xfce4-terminal
lightdm
network-manager
parrot-core
parrot-interface" > config/package-lists/desktop.list.chroot

